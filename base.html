<!-- ===== Updated templates/base.html (Pink Theme) ===== -->
<!-- Place this file at templates/base.html -->
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Neybor ‚Äî Checklist M√©nage</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body class="pink-bg">
  <nav class="navbar navbar-expand-lg navbar-glass sticky-top py-3">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url_for('index') }}">
        <span class="brand-badge">NB</span>
        <span class="fw-semibold">Neybor ‚Ä¢ M√©nage</span>
      </a>
      <div class="ms-auto small text-light-subtle">property@neybor.co</div>
    </div>
  </nav>

  <main class="container py-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-3">
        {% for category, message in messages %}
          <div class="alert alert-{{ 'danger' if category=='danger' else category }} shadow-sm mb-2 fancy-alert">{{ message }}</div>
        {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <footer class="py-4">
    <div class="container text-center small text-light-subtle">¬© Neybor ‚Äî Cleaning Checklist</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  {% block scripts %}{% endblock %}
</body>
</html>

<!-- ===== Updated templates/form.html (Pink Theme + Better UX) ===== -->
<!-- Place this file at templates/form.html -->
{% extends "base.html" %}
{% block content %}
<div class="card border-0 shadow-xl rounded-4 overflow-hidden mb-4">
  <div class="card-body p-4 p-md-5">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
      <div>
        <h1 class="display-6 fw-bold m-0 text-gradient">Checklist ‚Äî Apr√®s Checkout</h1>
        <p class="text-secondary m-0">Bilingue FR / UKR ‚Ä¢ Enregistrer avec photos</p>
      </div>
      <div class="progress-container">
        <div class="small text-secondary">Progression</div>
        <div class="progress rounded-pill" style="height: 10px; width: 240px;">
          <div id="progressBar" class="progress-bar bg-pink" role="progressbar" style="width: 0%"></div>
        </div>
        <div id="progressText" class="text-end small text-secondary mt-1">0%</div>
      </div>
    </div>

    <form method="post" action="{{ url_for('submit') }}" enctype="multipart/form-data" novalidate>
      <div class="row g-3 mb-4">
        <div class="col-md-4">
          <label class="form-label">Email <span class="required">*</span></label>
          <input type="email" name="email" class="form-control form-control-lg" placeholder="you@neybor.co" required />
        </div>
        <div class="col-md-4">
          <label class="form-label">üè† Appartement <span class="required">*</span></label>
          <input type="text" name="apartment" class="form-control form-control-lg" placeholder="Ex: Maison Florence 63" required />
        </div>
        <div class="col-md-4">
          <label class="form-label">üìÖ Date <span class="required">*</span></label>
          <input type="date" name="date" class="form-control form-control-lg" required />
        </div>
        <div class="col-12">
          <label class="form-label">üë§ Nom <span class="required">*</span></label>
          <input type="text" name="person_name" class="form-control form-control-lg" placeholder="Votre nom" required />
        </div>
      </div>

      <div class="accordion accordion-clean" id="checklistAccordion">
        {% for room in checklist.rooms %}
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#acc-{{ room.key }}">
              {{ room.title }}
            </button>
          </h2>
          <div id="acc-{{ room.key }}" class="accordion-collapse collapse show" data-bs-parent="#checklistAccordion">
            <div class="accordion-body">
              <div class="row g-3 align-items-center">
                {% for task in checklist.room_tasks %}
                <div class="col-md-3">
                  <label class="form-check custom-check">
                    <input class="form-check-input" type="checkbox" name="{{ room.key }}__{{ task.key }}">
                    <span class="checkmark"></span>
                    <span class="label">{{ task.label }}</span>
                  </label>
                </div>
                {% endfor %}
                <div class="col-md-6">
                  <label class="form-label">Photo Avant</label>
                  <input type="file" name="{{ room.key }}__photo_before" accept="image/*" class="form-control fancy-file">
                </div>
                <div class="col-md-6">
                  <label class="form-label">Photo Apr√®s</label>
                  <input type="file" name="{{ room.key }}__photo_after" accept="image/*" class="form-control fancy-file">
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}

        {% macro section_block(section) -%}
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#acc-{{ section.key }}">
                {{ section.title }}{% if section.required %} <span class="badge rounded-pill bg-soft-pink ms-2">requis</span>{% endif %}
              </button>
            </h2>
            <div id="acc-{{ section.key }}" class="accordion-collapse collapse show" data-bs-parent="#checklistAccordion">
              <div class="accordion-body">
                <div class="row g-3">
                  {% for task in section.tasks %}
                  <div class="col-md-4">
                    <label class="form-check custom-check">
                      <input class="form-check-input" type="checkbox" name="{{ section.key }}__{{ task.key }}">
                      <span class="checkmark"></span>
                      <span class="label">{{ task.label }}</span>
                    </label>
                  </div>
                  {% endfor %}
                  <div class="col-md-6">
                    <label class="form-label">Photo Avant</label>
                    <input type="file" name="{{ section.key }}__photo_before" accept="image/*" class="form-control fancy-file">
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Photo Apr√®s</label>
                    <input type="file" name="{{ section.key }}__photo_after" accept="image/*" class="form-control fancy-file">
                  </div>
                </div>
              </div>
            </div>
          </div>
        {%- endmacro %}

        {{ section_block(checklist.kitchen) }}
        {{ section_block(checklist.dishes) }}
        {{ section_block(checklist.oven) }}
        {{ section_block(checklist.microwave) }}
        {{ section_block(checklist.shower) }}
        {{ section_block(checklist.toilet) }}
      </div>

      <div class="card card-soft mt-4">
        <div class="card-body">
          <h2 class="h5 mb-3">üìé Cas sp√©cial ou oubli</h2>
          <textarea class="form-control" name="special_text" rows="3" placeholder="Ex: Ampoule manquante, fuite, etc."></textarea>
        </div>
      </div>

      <div class="card card-soft mt-3">
        <div class="card-body">
          <h2 class="h5 mb-3">üì∏ Photo ou commentaire</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <input type="file" name="extra__photo" accept="image/*" class="form-control fancy-file">
            </div>
            <div class="col-md-6">
              <textarea class="form-control" name="extra_text" rows="1" placeholder="Commentaire"></textarea>
            </div>
          </div>
        </div>
      </div>

      <div class="sticky-submit d-grid gap-2 mt-4">
        <button class="btn btn-xl btn-pink" type="submit">Envoyer</button>
        <div class="small text-secondary text-center">Ne soumettez jamais de mots de passe via ce formulaire.</div>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Pink progress based on all checkboxes
  function updateProgress() {
    const boxes = Array.from(document.querySelectorAll('input[type="checkbox"]'));
    const total = boxes.length || 1;
    const checked = boxes.filter(b => b.checked).length;
    const pct = Math.round((checked / total) * 100);
    const bar = document.getElementById('progressBar');
    const txt = document.getElementById('progressText');
    if (bar) bar.style.width = pct + '%';
    if (txt) txt.textContent = pct + '%';
  }
  document.addEventListener('change', (e) => {
    if (e.target.matches('input[type="checkbox"]')) updateProgress();
  });
  window.addEventListener('load', updateProgress);
</script>
{% endblock %}

<!-- ===== Updated templates/submissions.html (Pink accents) ===== -->
<!-- Place this file at templates/submissions.html -->
{% extends "base.html" %}
{% block content %}
  {% if single_id %}
    <div class="alert alert-success fancy-alert">Votre envoi #{{ single_id }} a √©t√© sauvegard√©.</div>
    <a href="{{ url_for('index') }}" class="btn btn-outline-pink">Nouveau formulaire</a>
  {% endif %}

  {% if entries and not single_id %}
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h2 class="h5 m-0 text-gradient">Derni√®res soumissions</h2>
      <a class="btn btn-sm btn-outline-pink" href="{{ url_for('index') }}">Retour</a>
    </div>
    <div class="list-group">
      {% for e in entries %}
      <div class="list-group-item py-3 rounded-3 shadow-sm mb-2 border-0">
        <div class="d-flex justify-content-between">
          <div>
            <div class="fw-semibold">#{{ e.id }} ‚Äî {{ e.apartment }} ‚Äî {{ e.date_iso }}</div>
            <div class="small text-secondary">{{ e.person_name }} &lt;{{ e.email }}&gt; ‚Ä¢ {{ e.created_at }}</div>
          </div>
        </div>

        <details class="mt-2">
          <summary>Voir d√©tails</summary>
          <div class="mt-2">
            <pre class="bg-body-tertiary p-2 rounded small">{{ e.data | tojson(indent=2, ensure_ascii=False) }}</pre>
          </div>
          {% if e.files %}
            <div class="row g-2 mt-1">
              {% for sec, filedict in e.files.items() %}
                {% for label, meta in filedict.items() %}
                  {% if meta %}
                    <div class="col-md-3">
                      <div class="border rounded p-1 small text-center">
                        <div class="mb-1">{{ sec }} / {{ label }}</div>
                        {% if meta.drive_id %}
                          <a href="{{ meta.webViewLink }}" target="_blank" rel="noopener" class="btn btn-sm btn-outline-pink">Ouvrir dans Drive</a>
                        {% elif meta.local_filename %}
                          <img src="{{ url_for('uploaded_file', sid=e.id, filename=meta.local_filename) }}" class="img-fluid rounded" alt="photo">
                        {% endif %}
                      </div>
                    </div>
                  {% endif %}
                {% endfor %}
              {% endfor %}
            </div>
          {% endif %}
        </details>
      </div>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}

<!-- ===== Updated static/style.css (Pink Theme) ===== -->
/* Place this file at static/style.css */
:root{
  --pink-900:#7a104a;
  --pink-700:#b4236b;
  --pink-600:#d23189;
  --pink-500:#ff4fa8;
  --pink-400:#ff73bd;
  --pink-300:#ff97cf;
  --pink-200:#ffc0e1;
  --pink-100:#ffe3f2;
  --bg-grad-1:#ffe3f2;
  --bg-grad-2:#ffd2ea;
}

.pink-bg{
  background: linear-gradient(180deg,var(--bg-grad-1),var(--bg-grad-2));
  min-height: 100dvh;
}

.navbar-glass{
  background: rgba(255,255,255,0.4);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid rgba(255,255,255,0.4);
}

.brand-badge{
  display:inline-grid;place-items:center;
  width:32px;height:32px;border-radius:10px;
  background: linear-gradient(135deg,var(--pink-500),var(--pink-300));
  color:white;font-weight:700;font-size:14px;
}

.text-gradient{
  background: linear-gradient(90deg,var(--pink-700),var(--pink-400));
  -webkit-background-clip: text; background-clip: text; color: transparent;
}

.fancy-alert{ border-left:4px solid var(--pink-500); }

.card-soft{ background: white; border: 1px solid #f2d7e8; }

.btn-pink{
  background: linear-gradient(90deg,var(--pink-500),var(--pink-400));
  border: none; color: #fff; padding: .9rem 1.25rem;
  border-radius: 14px; box-shadow: 0 8px 20px rgba(255, 79, 168, .25);
}
.btn-pink:hover{ filter: brightness(1.05); }

.btn-outline-pink{
  color: var(--pink-700); border-color: var(--pink-400);
}
.btn-outline-pink:hover{ background: var(--pink-100); color: var(--pink-900); }

.bg-pink{ background-color: var(--pink-500) !important; }
.bg-soft-pink{ background-color: var(--pink-100); color: var(--pink-700); }

.required{ color: var(--pink-600); }

/* Custom checkbox */
.custom-check{ display:flex; align-items:center; gap:.6rem; cursor:pointer; }
.custom-check .form-check-input{ display:none; }
.custom-check .checkmark{
  width:22px;height:22px;border-radius:6px; border:2px solid var(--pink-400);
  display:inline-block; position:relative; transition:all .2s;
  background:white;
}
.custom-check .form-check-input:checked + .checkmark{
  background: linear-gradient(135deg,var(--pink-500),var(--pink-300));
  border-color: transparent;
}
.custom-check .form-check-input:checked + .checkmark::after{
  content:""; position:absolute; left:6px; top:1px; width:6px; height:12px;
  border: solid white; border-width:0 2px 2px 0; transform: rotate(45deg);
}
.custom-check .label{ user-select:none; }

/* File input */
.fancy-file{ border-radius:12px; padding:.6rem .9rem; border:1px solid #f1cfe1; }
.fancy-file:focus{ border-color: var(--pink-500); box-shadow: 0 0 0 .2rem rgba(255,79,168,.15); }

/* Accordion styling */
.accordion-clean .accordion-item{ border: 1px solid #f2d7e8; border-radius: 14px; overflow: hidden; margin-bottom: .75rem; }
.accordion-clean .accordion-button{ background: #fff; }
.accordion-clean .accordion-button:not(.collapsed){
  background: linear-gradient(180deg, #fff, #fff0f6);
  color: var(--pink-900);
}

/* Sticky submit */
.sticky-submit{ position: sticky; bottom: 12px; }

/* Shadows */
.shadow-xl{ box-shadow: 0 12px 30px rgba(122,16,74,.12); }

/* Progress */
.progress-container{ min-width: 260px; }

pre{ white-space: pre-wrap; word-break: break-word; }
